{% extends "base.html" %}

{% block title %}Mood Map{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 24px;">
    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 32px;">
        <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #1a73e8 0%, #34a853 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(26, 115, 232, 0.3);">
            <span class="material-icons" style="font-size: 32px; color: white;">mood</span>
        </div>
        <div>
            <h1 style="margin: 0 0 8px 0; font-size: 32px; font-weight: 600; color: #202124;">Mood Map</h1>
            <p style="margin: 0; color: #5f6368; font-size: 16px;">Track your emotional journey over time</p>
        </div>
    </div>

    {% if current_mood %}
    <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 24px; border-radius: 16px; margin-bottom: 32px; border: 2px solid #fbbf24;">
        <div style="display: flex; align-items: center; gap: 16px;">
            <div style="font-size: 48px;">{% if current_mood %}{{ current_mood|emoji }}{% else %}ðŸ™‚{% endif %}</div>
            <div>
                <h2 style="margin: 0 0 8px 0; font-size: 24px; font-weight: 600; color: #202124;">Today's Mood: {{ current_mood|title }}</h2>
                <p style="margin: 0; color: #5f6368; font-size: 16px;">Your current emotional state</p>
            </div>
        </div>
    </div>
    {% endif %}

    <div style="background: white; padding: 32px; border-radius: 16px; border: 1px solid #e8eaed; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 32px;">
        <h2 style="margin: 0 0 24px 0; font-size: 24px; font-weight: 600; color: #202124;">{{ month|month_name }} {{ year }}</h2>
        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px;">
            <div style="text-align: center; padding: 12px; font-weight: 600; color: #5f6368; font-size: 14px;">Sun</div>
            <div style="text-align: center; padding: 12px; font-weight: 600; color: #5f6368; font-size: 14px;">Mon</div>
            <div style="text-align: center; padding: 12px; font-weight: 600; color: #5f6368; font-size: 14px;">Tue</div>
            <div style="text-align: center; padding: 12px; font-weight: 600; color: #5f6368; font-size: 14px;">Wed</div>
            <div style="text-align: center; padding: 12px; font-weight: 600; color: #5f6368; font-size: 14px;">Thu</div>
            <div style="text-align: center; padding: 12px; font-weight: 600; color: #5f6368; font-size: 14px;">Fri</div>
            <div style="text-align: center; padding: 12px; font-weight: 600; color: #5f6368; font-size: 14px;">Sat</div>
            
            {% for week in calendar %}
                {% for day in week %}
                    {% if day == "" %}
                        <div style="aspect-ratio: 1; background: #f8f9fa; border-radius: 8px;"></div>
                    {% else %}
                        <div style="aspect-ratio: 1; background: {% if day %}linear-gradient(135deg, #e8f0fe 0%, #d2e3fc 100%){% else %}#f8f9fa{% endif %}; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 24px; border: {% if day %}2px solid #1a73e8{% else %}1px solid #e8eaed{% endif %};">
                            {{ day }}
                        </div>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        </div>
    </div>

    {% if mood_history %}
    <div style="background: white; padding: 32px; border-radius: 16px; border: 1px solid #e8eaed; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <h2 style="margin: 0 0 24px 0; font-size: 24px; font-weight: 600; color: #202124;">Recent Mood History</h2>
        <div style="display: flex; flex-direction: column; gap: 12px;">
            {% for entry in mood_history[:10] %}
            <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: #f8f9fa; border-radius: 12px; border: 1px solid #e8eaed;">
                <div style="font-size: 32px;">{{ entry.mood|emoji }}</div>
                <div style="flex: 1;">
                    <div style="font-weight: 600; color: #202124; font-size: 16px;">{{ entry.mood|title }}</div>
                    <div style="color: #5f6368; font-size: 14px;">{{ entry.date }}</div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

<style>
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
div[style*="aspect-ratio"] {
    animation: fadeIn 0.3s ease-out;
}
</style>
{% endblock %}

